<h2>End-to-end flow</h2>

<p>
This flow diagram is the heart of the system.
It shows how execution is made safe under concurrency, retries, and failure
by separating <b>decision-making</b> from <b>execution</b>.
</p>

<p>
The key invariant to keep in mind while reading the diagram:
<b>workers never own state or resources permanently â€” they borrow execution rights under a lease.</b>
</p>

<!-- KEEP YOUR ORIGINAL DIAGRAM EXACTLY AS-IS BELOW THIS LINE -->
<img src="./flow.svg"
     alt="End-to-end agent execution flow"
     style="max-width:100%; margin:20px 0; border:1px solid #e5e7eb; border-radius:12px;">

<!-- OR whatever exact diagram markup you already had -->
